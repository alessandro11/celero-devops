# Example of the firewall template usage.
#
# In this example, an array of firewall rules is applied to the
# 'network' VPC.
#
# Replace 'network-name' with a valid VPC network name.
#
imports:
  - path: firewall.py
    name: firewall.py

resources:
  - name: blog-firewall
    type: firewall.py
    properties:
      network: blog-app
      rules:
        - name: allow-proxy-internal
          allowed:
            - IPProtocol: tcp
              ports:
                - "8080"
          description: Allow only from web server
          direction: INGRESS
          priority: 10
          sourceRanges:
            - 10.128.0.100/32

        - name: allow-db
          allowed:
            - IPProtocol: tcp
              ports:
                - "5432"
          description: Allow db connection
          direction: INGRESS
          targetTags:
            - "allow-db"
          priority: 10
          sourceRanges:
            - 10.128.0.0/27

        - name: allow-ssh
          allowed:
            - IPProtocol: tcp
              ports:
                - "22"
          description: Allow ssh connection
          direction: INGRESS
          priority: 65534
